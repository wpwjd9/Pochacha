(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{5313:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5893),s=n(7294),l=n(1649),i=n(8e3),a=n.n(i),o=n(4593),c=n(9417),d=n.n(c),u=n(7677);function x(){let e=(0,l.v9)(e=>e.room.currentRoomId),t=(0,l.v9)(e=>e.player);console.log("Liar Game",t);let[n,i]=(0,s.useState)(""),[c,u]=(0,s.useState)("ready"),[x,j]=(0,s.useState)({}),[m,b]=(0,s.useState)(null),_=()=>{x.current=o.L.over(()=>{let e=new(a())("https://ohogame.shop/ws");return e})},g=()=>{x.current.connect({},()=>{x.current.subscribe("/topic/mini/liar/set/".concat(e),e=>{let t=JSON.parse(e.body);console.log("라이어게임 단어"),console.log(t),i(t.word),u("checkWord"),b(t.liar)})})};(0,s.useEffect)(()=>{_(),g()},[]);let f=n=>{t.currentHead?x.current?x.current.send("/mini/liar/set/".concat(e),{},JSON.stringify({subject:n})):alert("소켓 연결 실패!"):alert("방장이 주제를 선택해주세요.")};return(0,r.jsx)("div",{style:{textAlign:"center"},children:"ready"==c?(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"주제를 골라주세요"}),(0,r.jsx)("br",{}),(0,r.jsxs)("div",{className:d().buttonContainer,children:[(0,r.jsx)("button",{className:d().button,onClick:()=>f("animal"),children:"동물"}),(0,r.jsx)("button",{className:d().button,onClick:()=>f("country"),children:"나라"})]}),(0,r.jsxs)("div",{className:d().buttonContainer,children:[(0,r.jsx)("button",{className:d().button,onClick:()=>f("food"),children:"음식"}),(0,r.jsx)("button",{className:d().button,onClick:()=>f("objects"),children:"사물"})]}),(0,r.jsxs)("div",{className:d().buttonContainer,children:[(0,r.jsx)("button",{className:d().button,onClick:()=>f("singer"),children:"가수"}),(0,r.jsx)("button",{className:d().button,onClick:()=>f("sports"),children:"스포츠"})]})]}):(0,r.jsx)(h,{word:n,liar:m,currentPlayer:t.currentPlayerId})})}function h(e){let t=e.word,n=null;n=e.currentPlayer===e.liar;let[l,i]=(0,s.useState)(!1);return setTimeout(()=>{i(!0)},7e3),(0,r.jsx)("div",{children:!1==l?!1==n?(0,r.jsxs)("div",{className:d().checkword,children:[(0,r.jsx)("h1",{children:"단어를 확인하세요."}),(0,r.jsx)("div",{children:(0,r.jsxs)("h3",{children:["주어진 단어는 ",(0,r.jsx)("span",{style:{fontSize:"xx-large"},children:t})," 입니다.",(0,r.jsx)("br",{})," 라이어에게 들키지 않게 설명하세요."]})})]}):(0,r.jsx)("h1",{children:"당신은 라이어입니다."}):(0,r.jsx)(u.default,{})})}},7677:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5893),s=n(7294),l=n(1649),i=n(8e3),a=n.n(i),o=n(4593),c=n(480),d=n(9417),u=n.n(d);function x(){let[e,t]=(0,s.useState)(0),[n,i]=(0,s.useState)(33),[d,x]=(0,s.useState)("ing"),[h,j]=(0,s.useState)({}),m=(0,l.v9)(e=>e.room.currentRoomId),b=()=>{h.current=o.L.over(()=>{let e=new(a())("http://localhost:80/ws");return e})},_=()=>{h.current.connect({},()=>{h.current.subscribe("/topic/timer/".concat(m),e=>{let t=JSON.parse(e.body);console.log("Timer 연결"),console.log(t),i(n+t.time)})})};(0,s.useEffect)(()=>{b(),_()},[]),(0,s.useEffect)(()=>{let r=setInterval(()=>{parseInt(n)>0&&i(parseInt(n)-1),0===parseInt(n)&&(0===parseInt(e)?(clearInterval(r),x("done")):(t(parseInt(e)-1),i(59)))},1e3);return()=>clearInterval(r)},[e,n]);let g=()=>{h.current?h.current.send("/timer/".concat(m),{},JSON.stringify({time:30})):alert("소켓 연결 실패!")};return(0,r.jsxs)("div",{className:"discuss",children:["ing"===d&&e>=0&&n>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{children:"토론을 해보세요"}),(0,r.jsxs)("h2",{children:[e,":",n<10?"0".concat(n):n,"초 남았습니다."]})]}),"ing"===d&&0===e&&n<=30&&n>=1&&(0,r.jsx)("button",{className:u().addTimebtn,onClick:()=>g(),children:"시간 추가"}),"done"===d&&(0,r.jsx)(c.default,{})]})}},480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5893),s=n(7294),l=n(1649),i=n(8e3),a=n.n(i),o=n(4593),c=n(9417),d=n.n(c);function u(){let e=(0,l.v9)(e=>e.room.currentRoomId),t=(0,l.v9)(e=>e.player),n=(0,l.v9)(e=>e.players.tmpPlayers),[i,c]=(0,s.useState)({}),[u,h]=(0,s.useState)("voting"),[j,m]=(0,s.useState)(!1),[b,_]=(0,s.useState)(null),[g,f]=(0,s.useState)(null),[v,p]=(0,s.useState)(""),[y,S]=(0,s.useState)(Object.keys(n)),C=e=>{_(e.target.id),console.log(b)},N=()=>{i.current=o.L.over(()=>{let e=new(a())("http://localhost:80/ws");return e})},k=()=>{i.current.connect({},()=>{i.current.subscribe("/topic/mini/liar/vote/".concat(e),e=>{let t=JSON.parse(e.body);console.log(t),4===t.total&&(!1===t.tiebreak?(f(t.liar),p(t.word),!0===t.winner?(console.log("라이어 승리!!!!"),h("liarWin")):(console.log("라이어 패배!!!!"),h("liarLose"))):(alert("동률이 나왔습니다. 재투표 해주세요!"),h("voting"),m(!1),S(t.tiebreaker)))})})};return(0,s.useEffect)(()=>{N(),k()},[]),(0,r.jsx)(r.Fragment,{children:"voting"===u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{style:{marginBottom:"30px"},children:"누가 거짓말을 하고 있을까?"}),(0,r.jsxs)("div",{className:d().voteContainer,children:[(0,r.jsxs)("fieldset",{className:d().fieldSet,children:[(0,r.jsx)("legend",{className:d().legend,children:"라이어라고 생각되는 사람에게 투표하세요"}),(0,r.jsx)("div",{children:y.map((e,t)=>(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{style:{marginTop:"20px"},type:"radio",id:n[e].id,name:"votePlayer",value:n[e].nickname,onChange:C}),(0,r.jsx)("span",{style:{fontSize:"18px"},children:n[e].nickname}),(0,r.jsx)("br",{})]},t))})]}),!1==j?(0,r.jsx)("button",{className:d().beforeVotebtn,onClick:()=>{if(console.log("------------------------"),console.log("투표하기 클릭 시 선택된 플레이어",b),console.log("send 처리 전 voteStatus",j),console.log("------------------------"),!j){if(b){let n={playerId:t.currentPlayerId,vote:b};i.current?(i.current.send("/mini/liar/vote/".concat(e),{},JSON.stringify(n)),m(!0)):alert("소켓 연결 실패!")}else alert("플레이어를 선택해주세요!")}},children:"투표하기"}):(0,r.jsx)("button",{className:d().voteCompletebtn,onClick:()=>{j&&alert("이미 투표에 참여하셨습니다.")},children:"투표완료"})]})]}):(0,r.jsx)(x,{stageStatus:u,liar:g,currentPlayer:t.currentPlayerId,word:v})})}function x(e){let t=e.word;console.log(t);let n=e.stageStatus;console.log(n);let s=null;console.log(s=e.currentPlayer===e.liar);let i=(0,l.v9)(e=>e.players.tmpPlayers)[e.liar].nickname;return(0,r.jsx)("div",{className:d().resultContainer,children:"liarWin"===n?!0==s?(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:["축하합니다.",(0,r.jsx)("br",{}),"당신의 승리입니다."]}),(0,r.jsx)("br",{}),(0,r.jsxs)("h2",{children:["제시 단어는 ",(0,r.jsx)("span",{style:{fontSize:"xx-large"},children:t})," 입니다."]})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:["아쉽네요.",(0,r.jsx)("br",{})," 라이어의 승리입니다."]}),(0,r.jsx)("div",{children:(0,r.jsxs)("h2",{children:["라이어는",(0,r.jsx)("br",{})," ",(0,r.jsx)("span",{style:{fontSize:"xx-large"},children:i}),(0,r.jsx)("br",{})," 입니다."]})})]}):!0==s?(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:["아쉽네요.",(0,r.jsx)("br",{}),"당신의 패배입니다."]}),(0,r.jsx)("br",{}),(0,r.jsxs)("h2",{children:["제시 단어는 ",(0,r.jsx)("span",{style:{fontSize:"xx-large"},children:t})," 입니다."]})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{children:["축하합니다.",(0,r.jsx)("br",{})," 당신의 승리입니다."]}),(0,r.jsx)("div",{children:(0,r.jsxs)("h2",{children:["라이어는",(0,r.jsx)("br",{})," ",(0,r.jsx)("span",{style:{fontSize:"xx-large"},children:i}),(0,r.jsx)("br",{})," 입니다."]})})]})})}},9417:function(e){e.exports={gameContainer:"LiarGame_gameContainer__6i3pS",buttonContainer:"LiarGame_buttonContainer__3B_Kf",button:"LiarGame_button__hii_r",roof:"LiarGame_roof__jx8ig",title:"LiarGame_title__ABeA8",boxContainer:"LiarGame_boxContainer__fM4DP",box:"LiarGame_box__cUAyY",checkword:"LiarGame_checkword__LAsTV",addTimebtn:"LiarGame_addTimebtn__SCke_",voteContainer:"LiarGame_voteContainer__7hKQ_",fieldSet:"LiarGame_fieldSet__bogqs",legend:"LiarGame_legend__soHrV",beforeVotebtn:"LiarGame_beforeVotebtn__nXzg_",voteCompletebtn:"LiarGame_voteCompletebtn__5MlsQ",resultContainer:"LiarGame_resultContainer__pnHMp"}}}]);