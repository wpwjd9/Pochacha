(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[503],{2997:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/room/[id]/RoomChat",function(){return n(9180)}])},9180:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(5893),o=n(7294),r=n(9255),s=n.n(r);function c(e){let t=e.info,[n]=(0,o.useState)(e.client);console.log(t),console.log(n);let[r,c]=(0,o.useState)(""),[i,u]=(0,o.useState)(""),[_,l]=(0,o.useState)(0),[m,h]=(0,o.useState)(!0),f=e=>{c(e.target.value)},d=e=>{"Enter"===e.key&&(e.preventDefault(),g(),c(""))},g=()=>{if(u(r),i===r){if(l(_+1),_>=4){h(!1),alert("5회 이상 같은 채팅을 입력하셨습니다."),l(0),c("");return}}else l(0);if(""===r)alert("입력된 메시지가 없습니다.");else if(n.current){var e={playerId:t.nick,message:r};n.current.send("/chat/"+t.roomId,{},JSON.stringify(e))}c("")};(0,o.useEffect)(()=>{let e=setTimeout(()=>{h(!0)},15e3);return()=>clearTimeout(e)},[m]);let p=(0,o.useRef)(null);(0,o.useEffect)(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[e.chatHistory]);let P=()=>{if(""===r){var e={playerId:"입장 알림봇",message:"".concat(t.nick,"님이 입장하셨습니다.")};n.current.send("/chat/"+t.roomId,{},JSON.stringify(e))}c("")};return(0,o.useEffect)(()=>{setTimeout(()=>{P()},1e3)},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:s().outerChat,children:(0,a.jsx)("div",{className:s().innerChat,children:(0,a.jsx)("textarea",{ref:p,className:s().chatArea,readOnly:!0,value:e.chatHistory})})}),m?(0,a.jsx)("input",{type:"text",className:s().chatInput,value:r,onChange:f,onKeyDown:d}):null,m?null:(0,a.jsx)("input",{type:"text",className:s().chatInput,placeholder:"15초 후에 채팅이 가능합니다.",value:r,onChange:f,onKeyDown:d,disabled:!0}),(0,a.jsx)("button",{className:s().sendBtn,onClick:g,children:"전송"})]})}},9255:function(e){e.exports={container:"RoomPage_container__nrifP",room:"RoomPage_room__jZJqd",camList:"RoomPage_camList__pr94X",cam:"RoomPage_cam__bKlCM",chatContainer:"RoomPage_chatContainer__Hlg7I",outerChat:"RoomPage_outerChat__j4Ee0",innerChat:"RoomPage_innerChat__ZniE2",chatUnit:"RoomPage_chatUnit__9sfcL",sender:"RoomPage_sender__9HCU2",time:"RoomPage_time__4KvWW",message:"RoomPage_message__3J_1w",chatArea:"RoomPage_chatArea__njIvi",chatInput:"RoomPage_chatInput__xkHum",sendBtn:"RoomPage_sendBtn__836RZ"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2997)}),_N_E=e.O()}]);