(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{6468:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/mini/mole",function(){return n(2648)}])},373:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(5893),s=n(7294),l=n(1649),o=n(8e3),i=n.n(o),c=n(4593),a=n(2825),u=n(1364),d=n(5980),m=n.n(d);let x=()=>({row:Math.floor(3*Math.random()),col:Math.floor(3*Math.random())});function f(e){let{sec:t}=e;return(0,r.jsx)("div",{children:(0,r.jsx)(h,{sec:t})})}function h(e){let{sec:t}=e,n=(0,l.v9)(e=>e.room.currentRoomId),o=(0,l.v9)(e=>e.player),[d,f]=(0,s.useState)({}),[h,_]=(0,s.useState)(0),[g,j]=(0,s.useState)([]),[v,y]=(0,s.useState)(!1),[w,b]=(0,s.useState)({row:0,col:0}),[B,N]=(0,s.useState)(-1),[I,S]=(0,s.useState)("ready"),[M,E]=(0,s.useState)(null),G=()=>{d.current=c.L.over(()=>{let e=new(i())("http://localhost:80/ws");return e})},O=()=>{d.current.connect({},()=>{d.current.subscribe("/topic/mini/mole/".concat(n),e=>{let t=JSON.parse(e.body);console.log("두더지 게임 집계"),console.log(t),t.finish&&(S("done"),E(t.result))})})};(0,s.useEffect)(()=>{G(),O()},[]);let k=e=>{if(g[e]){_(e=>e+1),y(!0),b(g[e]);let t=[...g];t[e]=null,j(t),setTimeout(()=>{y(!1)},1e3)}};return(0,s.useEffect)(()=>{let e=setInterval(()=>{let e=[,,,].fill(null).map(()=>x());j(e)},1e3);return()=>clearInterval(e)},[]),(0,s.useEffect)(()=>{setTimeout(()=>{S("go")},3e3),setTimeout(()=>{S("game")},5e3)},[]),(0,r.jsxs)("div",{style:{textAlign:"center",position:"absolute",top:"20%",left:"50%",transform:"translate(-50%, -20%)"},children:[(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:"/두더지_로고.png",style:{marginTop:"20px",width:"400px"}})}),"ready"===I&&(0,r.jsx)(a.default,{}),"go"===I&&(0,r.jsx)(u.default,{}),"game"===I&&t>0&&(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsxs)("h3",{style:{marginBottom:"20px"},children:[h,"마리를 잡았어요! ",t,"초 남았습니다!"]}),(0,r.jsxs)("div",{className:m().container,children:[g.map((e,t)=>e&&(0,r.jsx)("img",{src:"/두더지_업.png",onClick:()=>k(t),style:{position:"absolute",top:"".concat(33.33*e.row,"%"),left:"".concat(33.33*e.col,"%"),width:"150px",height:"150px",cursor:"pointer"}},t)),v&&(0,r.jsx)("img",{src:"/두더지_망치후.png",style:{position:"absolute",top:"".concat(33.33*w.row,"%"),left:"".concat(33.33*w.col,"%"),width:"150px",height:"150px"}})]})]}),"game"===I&&t<=0&&(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsxs)("h3",{style:{marginBottom:"20px"},children:[h,"마리 잡기 성공!"]}),(0,r.jsx)("h3",{children:"화면을 클릭해 친구들의 점수를 확인하세요!"}),(0,r.jsx)("div",{className:m().end,children:(0,r.jsx)("img",{className:m().bounceInBottom,src:"/두더지_O.png",onClick:()=>{let e={playerId:o.currentPlayerId,score:h};d.current?d.current.send("/mini/mole/".concat(n),{},JSON.stringify(e)):alert("소켓 연결 실패!")}})})]}),"done"===I&&null!=M&&(0,r.jsx)(p,{result:M})]})}function p(e){let t=(0,l.v9)(e=>e.players.tmpPlayers),n=e.result;return(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("h2",{style:{marginBottom:"20px"},children:"순위 결과"}),(0,r.jsx)("div",{className:m().resultContainer,children:(0,r.jsx)("div",{className:m().scoreBoard,children:n.map((e,n)=>(0,r.jsxs)("div",{className:m().resultRow,children:[t[e.playerId].nickname,(0,r.jsx)("span",{children:":"}),(0,r.jsx)("span",{style:{fontSize:"xx-large"},children:e.score})]},n))})})]})}},1364:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(5893),s=n(5980),l=n.n(s);function o(){return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("h3",{style:{marginBottom:"20px"},children:"30초 시작합니다"}),(0,r.jsx)("div",{className:l().container,children:(0,r.jsx)("img",{src:"/두더지_시작.png",style:{width:"450px"}})})]})})}},2825:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(5893),s=n(5980),l=n.n(s);function o(){return(0,r.jsx)("div",{children:(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("h3",{style:{marginBottom:"20px"},children:"두더지 잡기 게임"}),(0,r.jsx)("div",{className:l().container,children:(0,r.jsx)("img",{src:"/두더지_준비.png",style:{width:"450px"}})})]})})}},2648:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(5893),s=n(7294),l=n(373);function o(){let[e,t]=(0,s.useState)(0),n=(0,s.useRef)(34),o=(0,s.useRef)(null);return(0,s.useEffect)(()=>(o.current=setInterval(()=>{t(n.current%60),n.current-=1},1e3),()=>clearInterval(o.current)),[]),(0,s.useEffect)(()=>{n.current<=-1&&(console.log("시간 초과"),clearInterval(o.current))}),(0,r.jsx)("div",{children:(0,r.jsx)(l.default,{sec:e})})}},5980:function(e){e.exports={container:"MoleGame_container__Olf6x",end:"MoleGame_end__JHzgf",slideInEllipticBottomFwd:"MoleGame_slideInEllipticBottomFwd__ualx1","slide-in-elliptic-bottom-fwd":"MoleGame_slide-in-elliptic-bottom-fwd__cBDOJ",bounceInBottom:"MoleGame_bounceInBottom__DhSyG","bounce-in-bottom":"MoleGame_bounce-in-bottom__2zrZm",resultContainer:"MoleGame_resultContainer__3OTVA",scoreBoard:"MoleGame_scoreBoard__vtWB1",resultRow:"MoleGame_resultRow__3WuS4"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6468)}),_N_E=e.O()}]);