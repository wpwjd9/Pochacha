(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{2062:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game/mini/liar/VoteLiarComponent",function(){return r(480)}])},480:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return _}});var t=r(5893),i=r(7294),s=r(1649),l=r(8e3),a=r.n(l),o=r(4593),c=r(9417),d=r.n(c);function _(){let e=(0,s.v9)(e=>e.room.currentRoomId),n=(0,s.v9)(e=>e.player),r=(0,s.v9)(e=>e.players.tmpPlayers),[l,c]=(0,i.useState)({}),[_,u]=(0,i.useState)("voting"),[h,m]=(0,i.useState)(!1),[j,b]=(0,i.useState)(null),[g,f]=(0,i.useState)(null),[p,v]=(0,i.useState)(""),[y,C]=(0,i.useState)(Object.keys(r)),S=e=>{b(e.target.id),console.log(j)},L=()=>{l.current=o.L.over(()=>{let e=new(a())("http://localhost:80/ws");return e})},k=()=>{l.current.connect({},()=>{l.current.subscribe("/topic/mini/liar/vote/".concat(e),e=>{let n=JSON.parse(e.body);console.log(n),4===n.total&&(!1===n.tiebreak?(f(n.liar),v(n.word),!0===n.winner?(console.log("라이어 승리!!!!"),u("liarWin")):(console.log("라이어 패배!!!!"),u("liarLose"))):(alert("동률이 나왔습니다. 재투표 해주세요!"),u("voting"),m(!1),C(n.tiebreaker)))})})};return(0,i.useEffect)(()=>{L(),k()},[]),(0,t.jsx)(t.Fragment,{children:"voting"===_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{style:{marginBottom:"30px"},children:"누가 거짓말을 하고 있을까?"}),(0,t.jsxs)("div",{className:d().voteContainer,children:[(0,t.jsxs)("fieldset",{className:d().fieldSet,children:[(0,t.jsx)("legend",{className:d().legend,children:"라이어라고 생각되는 사람에게 투표하세요"}),(0,t.jsx)("div",{children:y.map((e,n)=>(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{style:{marginTop:"20px"},type:"radio",id:r[e].id,name:"votePlayer",value:r[e].nickname,onChange:S}),(0,t.jsx)("span",{style:{fontSize:"18px"},children:r[e].nickname}),(0,t.jsx)("br",{})]},n))})]}),!1==h?(0,t.jsx)("button",{className:d().beforeVotebtn,onClick:()=>{if(console.log("------------------------"),console.log("투표하기 클릭 시 선택된 플레이어",j),console.log("send 처리 전 voteStatus",h),console.log("------------------------"),!h){if(j){let r={playerId:n.currentPlayerId,vote:j};l.current?(l.current.send("/mini/liar/vote/".concat(e),{},JSON.stringify(r)),m(!0)):alert("소켓 연결 실패!")}else alert("플레이어를 선택해주세요!")}},children:"투표하기"}):(0,t.jsx)("button",{className:d().voteCompletebtn,onClick:()=>{h&&alert("이미 투표에 참여하셨습니다.")},children:"투표완료"})]})]}):(0,t.jsx)(x,{stageStatus:_,liar:g,currentPlayer:n.currentPlayerId,word:p})})}function x(e){let n=e.word;console.log(n);let r=e.stageStatus;console.log(r);let i=null;console.log(i=e.currentPlayer===e.liar);let l=(0,s.v9)(e=>e.players.tmpPlayers)[e.liar].nickname;return(0,t.jsx)("div",{className:d().resultContainer,children:"liarWin"===r?!0==i?(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{children:["축하합니다.",(0,t.jsx)("br",{}),"당신의 승리입니다."]}),(0,t.jsx)("br",{}),(0,t.jsxs)("h2",{children:["제시 단어는 ",(0,t.jsx)("span",{style:{fontSize:"xx-large"},children:n})," 입니다."]})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{children:["아쉽네요.",(0,t.jsx)("br",{})," 라이어의 승리입니다."]}),(0,t.jsx)("div",{children:(0,t.jsxs)("h2",{children:["라이어는",(0,t.jsx)("br",{})," ",(0,t.jsx)("span",{style:{fontSize:"xx-large"},children:l}),(0,t.jsx)("br",{})," 입니다."]})})]}):!0==i?(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{children:["아쉽네요.",(0,t.jsx)("br",{}),"당신의 패배입니다."]}),(0,t.jsx)("br",{}),(0,t.jsxs)("h2",{children:["제시 단어는 ",(0,t.jsx)("span",{style:{fontSize:"xx-large"},children:n})," 입니다."]})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{children:["축하합니다.",(0,t.jsx)("br",{})," 당신의 승리입니다."]}),(0,t.jsx)("div",{children:(0,t.jsxs)("h2",{children:["라이어는",(0,t.jsx)("br",{})," ",(0,t.jsx)("span",{style:{fontSize:"xx-large"},children:l}),(0,t.jsx)("br",{})," 입니다."]})})]})})}},9417:function(e){e.exports={gameContainer:"LiarGame_gameContainer__6i3pS",buttonContainer:"LiarGame_buttonContainer__3B_Kf",button:"LiarGame_button__hii_r",roof:"LiarGame_roof__jx8ig",title:"LiarGame_title__ABeA8",boxContainer:"LiarGame_boxContainer__fM4DP",box:"LiarGame_box__cUAyY",checkword:"LiarGame_checkword__LAsTV",addTimebtn:"LiarGame_addTimebtn__SCke_",voteContainer:"LiarGame_voteContainer__7hKQ_",fieldSet:"LiarGame_fieldSet__bogqs",legend:"LiarGame_legend__soHrV",beforeVotebtn:"LiarGame_beforeVotebtn__nXzg_",voteCompletebtn:"LiarGame_voteCompletebtn__5MlsQ",resultContainer:"LiarGame_resultContainer__pnHMp"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2062)}),_N_E=e.O()}]);